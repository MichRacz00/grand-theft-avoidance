<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Manage Stores</title>
  <link rel="stylesheet" href="css/systemadminstore.css">
  <link rel="stylesheet" href="css/store.css">
  <link rel="stylesheet" href="css/Sidebar.css">
  <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
  <script type="text/javascript" src="https://oss.sheetjs.com/sheetjs/xlsx.full.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>
</head>
<body scroll = "no" style="overflow: hidden">

<!--SIDEBAR-->
<div class="sidebar">
  <div class = "nav_top">
    <div class = "logo">
      <i class='bx bxs-meteor'></i>
      <span id="comp_name">LOGO</span>
    </div>
    <div class = "Profile">
      <img src="images/store_manager.png" alt="avatar" id="avatar"/>
      <div class="name">
        <span id = "name">Firstname Lastname</span>
      </div>
      <div class="title">
        <span id = "title">System Administrator</span>
      </div>
    </div>
  </div>
  <ul class="nav_list">

    <!--Users-->
    <li class="unselected-tab" onclick="location.href='systemadministrator.html'">
      <i class='bx bx-user' ></i>
      <span class="tab-description">Users</span>
    </li>
    <!--Stores-->
    <li class="selected-tab" onclick="location.href='systemadminstore.html'">
      <i class='bx bx-shopping-bag' ></i>
      <span class="tab-description">Stores</span>
    </li>

    <hr/>
    <!--Setting-->
    <li class="unselected-tab">
      <i class='bx bx-cog' ></i>
      <span class="tab-description">Setting</span>
    </li>

    <!--Log out-->
    <li class="unselected-tab" onclick="location.href='login.html'">
      <i class='bx bx-log-out' ></i>
      <span class="tab-description">Log out</span>
    </li>
  </ul>
</div>

<div class="store-division">
  <div id = "header">
    <h1 id ="store_header">Manage Stores</h1>
  </div>

  <div class = "nav-user-actions">
    <ul class = "navigate-actions">
      <li class="stores" id = "disactive"> <a href = "systemadminstore.html">Stores</a></li>
      <li class="new-store" id = "active"><a>New Store</a></li>
    </ul>
  </div>

  <div id = "new-store" style="margin: 0 auto">
    <p>Add new store</p>
    <input type="text" id="storeid" name = storeid placeholder = "Store name">
    <input type="text" id="latitude" name = latitude placeholder = "Latitude of Store">
    <input type="text" id="longitude" name = longitude placeholder = "Longitude of Store">


    <button id="add-store" class= "btn1">Add store</button>
  </div>

</div>


<script>
  let baseUri = "http://localhost:8080/GTA_VI/rest/";
  getToken();

  function getToken() {
    let xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function () {
      let myObj;
      if (this.readyState === 4 && this.status === 200) {
        myObj = JSON.parse(this.responseText);
        if (JSON.stringify(myObj) === "false" || myObj.permission !== 3) {
          window.location.href = "login.html";
        }
        lockToken = false;
      }
    }
    let uri = baseUri + "login/getId?token=" + localStorage.getItem("token");
    xhr.open("GET", uri);
    xhr.send();
  }


  function getDetails(id) {
    xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function () {
      if(this.readyState === 4 && this.status === 200) {
        alert(this.responseText);
      }
    }
    var uri = baseUri + "users/" + JSON.stringify(id);
    xhr.open("GET", uri);
    xhr.send();
  }


</script>


</body>
</html>